@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link href="~/css/site.css" rel="stylesheet" />

 <div class="row mt-6 search-page">
    <form method="get" asp-action="BuscarOferente">
        <div class="alert alert-primary" role="alert">
            @Html.TextBox("id", "", new { @class = "form-control" })

            <input type="submit" class="btn btn-secondary" value=" Buscar " id="btnbuscar" />
            <i class="bi bi-search"></i>


        </div>

    </form>
</div>


<div class="alert alert-primary p-2">
    <strong>Id: @ViewBag.id</strong><span></span>
    <strong>nombre: @ViewBag.nombre</strong>


</div>

<div class="row">
    <div class="col-md-12">
    <div class="alert alert-success" role="alert">


        <form class="form">

                <div class="form-group">
                    <input id="IdOferente" type="text" value="@ViewBag.id"  hidden class="form-control"/>

                    <span></span>
                </div>
            <div class="form-group">
                    <label for="Nombreempresa" class="control-label"></label>
                    <input id="Nombreempresa" type="text" class="form-control" placeholder="Nombre de la Empresa" required />

                    <span ></span>
            </div>

            <div class="form-group">
                <label for="Anioinicio" class="control-label"> Anio de inicio</label>
                <input id="Anioinicio" type="number" class="form-control"/>
            <span> </span>
          </div>

            <div class="form-group">
                    <label for="Aniofinal" class="control-label">  Anio final</label>
                    <input id="Aniofinal" type="number" class="form-control" />
                <span> </span>
            </div>
          <button  class="btn btn-secondary"id="btn-registro">Registrar</button>
        </form>

</div>
</div>

    </div>
  @*   importamos jquery *@
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

   <script>
       $(document).ready(function () {
       
       
           $('#btn-registro').click(function (e) { 
           
               e.preventDefault();
               var idoferente = $('#IdOferente').val();
               var nombreempresa = $('#Nombreempresa').val();
               var anioinicio = $('#Anioinicio').val();
               var aniofinal = $('#Aniofinal').val();
               var data = {
                   idOferente:idoferente,
                Nombreempresa: nombreempresa,
                   Anioinicio: anioinicio,
                   Aniofinal: aniofinal
               };


               $.ajax({
                url: "@Url.Action("RegistroExperienciaLaboral", "ExperienciaLaboral")",
               type:"POST",
               data:data,
                 success: function (data) { 
                     console.log("datos a enviar ",data);
                       if (data.success) { 
                       console.log("status.CodeOk")
                       
                       }
                   }
               });
           
           });
       
       
       });



   </script>
   